name: Deploy to Server
on: [push]
jobs:
  AWS-Deploy:
    runs-on: ubuntu-latest
    steps:
      - run: echo ${{ secrets.SSH_KEY }} | base64 -d > key.pem
      - run: chmod 400 key.pem
      - run: ssh -i key.pem -o StrictHostKeyChecking=no ubuntu@csa-backend.rohanj.dev 'cd ~/tri2/t8_csaspring; git pull; docker-compose down; docker-compose up -d --build'
